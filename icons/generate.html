<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generează PNG din SVG</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 20px; }
    button { padding: 8px 12px; border-radius: 8px; border: 1px solid #ccc; cursor: pointer; }
    .row { margin-top: 12px; }
    code { background: #f5f5f5; padding: 2px 6px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Generează PNG-urile pentru manifest</h1>
  <p>Apasă pe buton și se vor descărca automat cele 4 PNG-uri:</p>
  <ul>
    <li><code>icon-192.png</code></li>
    <li><code>icon-512.png</code></li>
    <li><code>maskable-icon-192.png</code></li>
    <li><code>maskable-icon-512.png</code></li>
  </ul>
  <div class="row">
    <button id="gen">Generează PNG-uri</button>
  </div>

  <script>
    async function svgToPng(svgPath, size, outName) {
      const svgText = await fetch(svgPath).then(r => r.text());
      const svgBlob = new Blob([svgText], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(svgBlob);
      try {
        const img = new Image();
        img.decoding = 'async';
        img.src = url;
        await new Promise((res, rej) => { img.onload = res; img.onerror = rej; });

        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, size, size);
        const blob = await new Promise(res => canvas.toBlob(res, 'image/png'));
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = outName;
        document.body.appendChild(a);
        a.click();
        a.remove();
      } finally {
        URL.revokeObjectURL(url);
      }
    }

    document.getElementById('gen').addEventListener('click', async () => {
      // Generează cele 4 fișiere PNG pe baza SVG-urilor existente
      await svgToPng('icon-192.svg', 192, 'icon-192.png');
      await svgToPng('icon-512.svg', 512, 'icon-512.png');
      await svgToPng('maskable-icon-192.svg', 192, 'maskable-icon-192.png');
      await svgToPng('maskable-icon-512.svg', 512, 'maskable-icon-512.png');
      alert('Gata! Au fost descărcate toate PNG-urile. Urcă-le în folderul icons/ pe GitHub.');
    });
  </script>
</body>
</html>
